"use strict";const inputElement=document.querySelector(".js-input"),btnSearchElement=document.querySelector(".js-btnSearch"),characterList=document.querySelector(".js-characterList"),favoriteList=document.querySelector(".js-favoriteList"),btnResetFavourites=document.querySelector(".js-resetBtn");let allCharacters=[],favCharacters=[],userSearch="";const urlApiAll="https://breakingbadapi.com/api/characters";function renderCharacter(e,t){t.innerHTml="";for(const a of e){const e=document.createElement("li");e.classList.add("section__list--element");const r=document.createElement("article");r.classList.add("article"),r.id=a.char_id;const c=document.createElement("figure");c.classList.add("article__imgBox");const s=document.createElement("img");s.src=a.img,s.classList.add("article__imgBox--img"),s.dataset.alt=`foto de ${a.name} `,c.appendChild(s);const n=document.createElement("h3");n.classList.add("article__name");const i=document.createTextNode(a.name);n.appendChild(i);const l=document.createElement("p");l.classList.add("article__status");const o=document.createTextNode(a.status);l.appendChild(o),r.appendChild(c),r.appendChild(n),r.appendChild(l),e.appendChild(r),t.appendChild(e)}cardListener()}function fetchCharacters(e){fetch(e).then(e=>e.json()).then(e=>{allCharacters=e,renderCharacter(allCharacters,characterList)})}function renderLocalSotarge(){null!==savedFavourites&&(favCharacters=savedFavourites,renderCharacter(favCharacters,favoriteList))}function handleClickSearch(e){characterList.innerHTML="",e.preventDefault(),userSearch=inputElement.value.toLowerCase();let t=allCharacters.filter(e=>e.name.toLowerCase().includes(userSearch));""===userSearch&&(t=allCharacters),renderCharacter(t,characterList)}function cardListener(){const e=document.querySelectorAll(".article");for(const t of e)t.addEventListener("click",handleClickCard)}function handleClickCard(e){const t=e.currentTarget,a=parseInt(t.id),r=allCharacters.find(e=>e.char_id===a),c=favCharacters.findIndex(e=>e.char_id===a);-1===c?(favCharacters.push(r),t.classList.add("selected")):(favCharacters.splice(c,1),t.classList.remove("selected")),localStorage.setItem("favoritesStorage",JSON.stringify(favCharacters)),favoriteList.innerHTML="",renderCharacter(favCharacters,favoriteList)}function cleanFavorites(){favCharacters=[],favoriteList.innerHTML="",localStorage.removeItem("favoritesStorage");const e=characterList.querySelectorAll(".article");for(const t of e)t.classList.remove("selected");renderCharacter(allCharacters,characterList)}fetchCharacters(urlApiAll),btnSearchElement.addEventListener("click",handleClickSearch);const savedFavourites=JSON.parse(localStorage.getItem("favoritesStorage"));renderLocalSotarge(),btnResetFavourites.addEventListener("click",cleanFavorites);